webpackJsonp([14],{HGBk:function(t,e){},UnNv:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"userEdit",data:function(){return{user:{},initUserHeadImg:s("ngKG"),sexObj:{value:null,text:null},birthdayObj:{year:null,month:null,day:null},addressObj:{province:null,city:null},collegeObj:{belongProvince:null,collegeName:null},sexPicker:null,birthdayPicker:null,addressPicker:null,collegePicker:null,isOpenBottomSheet:!1}},computed:{sexStr:function(){return this.sexObj.text},birthdayStr:function(){return this.birthdayObj.year?this.birthdayObj.year+"-"+this.birthdayObj.month+"-"+this.birthdayObj.day:""},addressStr:function(){return this.addressObj.province?this.addressObj.city?this.addressObj.province+"-"+this.addressObj.city:this.addressObj.province:""},collegeStr:function(){return this.collegeObj.collegeName?this.collegeObj.collegeName:""}},componets:{},methods:{openSexPicker:function(){this.sexPicker.show()},openBirthdayPicker:function(){this.birthdayPicker.show()},openAddressPicker:function(){this.addressPicker.show()},openCollegePicker:function(){this.collegePicker.show()},saveUserEdit:function(){var t=this;this.user.userSex=this.sexObj.value,this.user.userBirthday=util.common.formatDateStrToTimestamp(this.birthdayStr),this.user.userProvince=this.addressStr.split("-")[0],this.user.userCity=this.addressStr.split("-")[1],this.user.userSchool=this.collegeStr;var e=util.common.shallowCopyObj(this.user);e.userHeadImg=null,e.userBgImg=null,e.userBirthdayVo=e.userBirthday,util.http.normalReq.post("/USER-CLIENT/user",e,function(e){e.result?(util.cache.set("user",t.user),t.back()):util.ui.toast(e.msg,"WARN")})}},mounted:function(){this.user=util.cache.get("user");var t=this.user;if(t.userSex&&(1==t.userSex?this.sexObj={value:1,text:"男"}:this.sexObj={value:2,text:"女"}),t.userBirthday){var e=new Date(t.userBirthday);this.birthdayObj.year=e.getFullYear(),this.birthdayObj.month=e.getMonth()+1,this.birthdayObj.day=e.getDate()}t.userProvince&&(this.addressObj.province=t.userProvince),t.userCity&&(this.addressObj.city=t.userCity),t.userSchool&&(this.collegeObj.collegeName=t.userSchool),this.sexPicker=util.ui.getSexPicker(this.sexObj),this.birthdayPicker=util.ui.getBirthdayPicker(this.birthdayObj),this.addressPicker=util.ui.getAddressPicker(this.addressObj),this.collegePicker=util.ui.getCollegePicker(this.collegeObj)}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("app-wrap",[s("app-bar",{attrs:{slot:"appBar",title:"资料编辑"},slot:"appBar"},[s("mu-icon-button",{attrs:{slot:"left",icon:"icon-fanhui"},on:{click:t.back},slot:"left"}),t._v(" "),s("mu-icon-button",{attrs:{slot:"right",icon:"icon-ok"},on:{click:t.saveUserEdit},slot:"right"})],1),t._v(" "),s("app-content",{attrs:{slot:"appContent"},slot:"appContent"},[s("div",{staticClass:"avatar-wrap"},[s("img",{staticClass:"avatar-img",attrs:{src:t.user.userHeadImg?t.user.userHeadImg:t.initUserHeadImg,alt:"头像"},on:{click:function(e){t.go("/user/userHeadImg")}}})]),t._v(" "),s("div",{staticClass:"input-content"},[s("mu-list",[s("mu-list-item",{staticClass:"input-item"},[s("div",{staticClass:"input-item-label"},[t._v("用户昵称")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.userName,expression:"user.userName"}],staticClass:"input-item-input",attrs:{type:"text",placeholder:"未填写"},domProps:{value:t.user.userName},on:{input:function(e){e.target.composing||t.$set(t.user,"userName",e.target.value)}}})]),t._v(" "),s("mu-list-item",{staticClass:"input-item",on:{click:function(e){t.isSexInputFocus=!0}}},[s("div",{staticClass:"input-item-label"},[t._v("性别")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.sexStr,expression:"sexStr"}],staticClass:"input-item-input",attrs:{type:"text",readonly:"",placeholder:"未填写"},domProps:{value:t.sexStr},on:{click:t.openSexPicker,input:function(e){e.target.composing||(t.sexStr=e.target.value)}}})]),t._v(" "),s("mu-list-item",{staticClass:"input-item"},[s("div",{staticClass:"input-item-label"},[t._v("生日")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.birthdayStr,expression:"birthdayStr"}],staticClass:"input-item-input",attrs:{type:"text",readonly:"",placeholder:"未填写"},domProps:{value:t.birthdayStr},on:{click:t.openBirthdayPicker,input:function(e){e.target.composing||(t.birthdayStr=e.target.value)}}})]),t._v(" "),s("mu-list-item",{staticClass:"input-item"},[s("div",{staticClass:"input-item-label"},[t._v("地址")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.addressStr,expression:"addressStr"}],staticClass:"input-item-input",attrs:{type:"text",readonly:"",placeholder:"未填写"},domProps:{value:t.addressStr},on:{click:t.openAddressPicker,input:function(e){e.target.composing||(t.addressStr=e.target.value)}}})]),t._v(" "),s("mu-list-item",{staticClass:"input-item"},[s("div",{staticClass:"input-item-label"},[t._v("我的大学")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.collegeStr,expression:"collegeStr"}],staticClass:"input-item-input",attrs:{type:"text",readonly:"",placeholder:"未填写"},domProps:{value:t.collegeStr},on:{click:t.openCollegePicker,input:function(e){e.target.composing||(t.collegeStr=e.target.value)}}})]),t._v(" "),s("mu-list-item",{staticClass:"input-item"},[s("div",{staticClass:"input-item-label"},[t._v("签名")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.userInfo,expression:"user.userInfo"}],staticClass:"input-item-input",attrs:{type:"text",placeholder:"未填写"},domProps:{value:t.user.userInfo},on:{input:function(e){e.target.composing||t.$set(t.user,"userInfo",e.target.value)}}})])],1)],1),t._v(" "),s("mu-bottom-sheet",{attrs:{open:t.isOpenBottomSheet},on:{close:function(e){t.isOpenBottomSheet=!1}}},[s("mu-list",{on:{itemClick:function(e){t.isOpenBottomSheet=!1}}},[s("mu-sub-header",[t._v("\n\t\t\t\t\t请选择设置头像的方式\n\t\t\t\t")]),t._v(" "),s("mu-list-item",{attrs:{title:"现在拍一张"},on:{click:function(e){t.setAvatar(1)}}}),t._v(" "),s("mu-list-item",{attrs:{title:"从相册中选取"},on:{click:function(e){t.setAvatar(2)}}})],1)],1)],1)],1)},staticRenderFns:[]};var a=s("Z0/y")(i,r,!1,function(t){s("HGBk")},"data-v-345e1b7b",null);e.default=a.exports}});